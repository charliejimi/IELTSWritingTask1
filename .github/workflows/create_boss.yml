name: Create Boss Milestone

# æ‰‹å‹•è§¸ç™¼ workflowï¼Œä¸¦å®šç¾©è¼¸å…¥åƒæ•¸
on:
  workflow_dispatch:
    inputs:
      boss_name:
        description: 'é­”ç‹åç¨±'
        required: true
        type: string
      level:
        description: 'é­”ç‹ç­‰ç´š'
        required: true
        type: string # ç‚ºäº†çµ±ä¸€è™•ç†ï¼Œé€šå¸¸ç­‰ç´šä¹Ÿæœƒè¨­ç‚º string

jobs:
  create_milestone:
    runs-on: ubuntu-latest
    steps:
      - name: Create Milestone
        # ä½¿ç”¨ actions/github-script åŸ·è¡Œ API å‘¼å«
        uses: actions/github-script@v7 # æ¨è–¦ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            // ä¿®æ­£ï¼šå¾ context.payload.inputs å–å¾— workflow_dispatch çš„è¼¸å…¥åƒæ•¸
            const boss = context.payload.inputs.boss_name;
            const level = context.payload.inputs.level;

            // çµ„è£é‡Œç¨‹ç¢‘çš„æ¨™é¡Œ
            const title = `[Boss] ${boss} Lv.${level} Challenge`;

            // çµ„è£é‡Œç¨‹ç¢‘çš„æè¿° (ä½¿ç”¨ Markdown æ ¼å¼)
            const description = `
### ğŸ¯ é­”ç‹åç¨±
${boss} Boss

### ğŸ§© éŒ¯èª¤æè¿°
- å…¸å‹è¡¨ç¾: ...
- éŒ¯èª¤ç¤ºä¾‹: ...
- æ ¹æœ¬åŸå› : ...

### ğŸ¯ æ”¹é€²ç›®æ¨™
- Band 7: ...
- Band 8: ...
- Band 9: ...

### ğŸ“˜ Wiki é€£çµ
[Wiki Page](../../wiki/Boss/${boss}Boss)

### âœ… å®Œæˆæ¢ä»¶
- åˆ†æä¸‰ç¯‡èˆŠä½œ
- æ’°å¯«ä¿®æ­£ç‰ˆ
- è‡ªè©•é”æ¨™
- æ›´æ–° Wiki

### ğŸ§® EXP èˆ‡è©•åƒ¹ç´€éŒ„
- æ™‚é–“æŠ•å…¥
- èªçŸ¥è² è·
- è¼¸å‡ºå¼·åº¦
`;
            
            // å‘¼å« GitHub REST API å‰µå»ºé‡Œç¨‹ç¢‘
            await github.rest.issues.createMilestone({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: title,
              description: description
            });

            console.log(\`æˆåŠŸå‰µå»ºé‡Œç¨‹ç¢‘: \${title}\`);