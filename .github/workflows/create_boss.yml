name: Create Boss Milestone

# æ‰‹å‹•è§¸ç™¼ workflowï¼Œä¸¦å®šç¾©è¼¸å…¥åƒæ•¸
on:
  workflow_dispatch:
    inputs:
      boss_name:
        description: 'é­”ç‹åç¨±'
        required: true
        type: string
      level:
        description: 'é­”ç‹ç­‰ç´š'
        required: true
        type: string # ç‚ºäº†çµ±ä¸€è™•ç†ï¼Œé€šå¸¸ç­‰ç´šä¹Ÿæœƒè¨­ç‚º string

jobs:
  create_milestone:
    runs-on: ubuntu-latest
    steps:
      - name: Create Milestone
        # ä½¿ç”¨ actions/github-script åŸ·è¡Œ API å‘¼å«
        uses: actions/github-script@v7 # æ¨è–¦ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            // ä¿®æ­£ï¼šå¾ context.payload.inputs å–å¾— workflow_dispatch çš„è¼¸å…¥åƒæ•¸
            const boss = context.payload.inputs.boss_name;
            const level = context.payload.inputs.level;

            // çµ„è£é‡Œç¨‹ç¢‘çš„æ¨™é¡Œ
            const title = `[Boss] ${boss} Lv.${level} Challenge`;

            // çµ„è£é‡Œç¨‹ç¢‘çš„æè¿° (ä½¿ç”¨ Markdown æ ¼å¼)
            // ä¿®æ­£ï¼šæ”¹ç”¨å­—ä¸²æ‹¼æ¥ (é¿å… YAML è§£æå™¨å°‡å¤šè¡Œæ¨¡æ¿å­—ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦ (${...}) èª¤åˆ¤ç‚º YAML èªæ³•éŒ¯èª¤)
            const description = 
              "### ğŸ¯ é­”ç‹åç¨±\n" +
              `${boss} Boss\n\n` +
              "### ğŸ§© éŒ¯èª¤æè¿°\n" +
              "- å…¸å‹è¡¨ç¾: ...\n" +
              "- éŒ¯èª¤ç¤ºä¾‹: ...\n" +
              "- æ ¹æœ¬åŸå› : ...\n\n" +
              "### ğŸ¯ æ”¹é€²ç›®æ¨™\n" +
              "- Band 7: ...\n" +
              "- Band 8: ...\n" +
              "- Band 9: ...\n\n" +
              "### ğŸ“˜ Wiki é€£çµ\n" +
              `[Wiki Page](../../wiki/Boss/${boss}Boss)\n\n` +
              "### âœ… å®Œæˆæ¢ä»¶\n" +
              "- åˆ†æä¸‰ç¯‡èˆŠä½œ\n" +
              "- æ’°å¯«ä¿®æ­£ç‰ˆ\n" +
              "- è‡ªè©•é”æ¨™\n" +
              "- æ›´æ–° Wiki\n\n" +
              "### ğŸ§® EXP èˆ‡è©•åƒ¹ç´€éŒ„\n" +
              "- æ™‚é–“æŠ•å…¥\n" +
              "- èªçŸ¥è² è·\n" +
              "- è¼¸å‡ºå¼·åº¦";
            
            // å‘¼å« GitHub REST API å‰µå»ºé‡Œç¨‹ç¢‘
            await github.rest.issues.createMilestone({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: title,
              description: description
            });

            console.log(`æˆåŠŸå‰µå»ºé‡Œç¨‹ç¢‘: ${title}`);